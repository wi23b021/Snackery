<!DOCTYPE html>
<html lang="de">

<head>
    <meta charset="UTF-8">
    <title>Snackery – Internationale Snacks</title>
    <link rel="stylesheet" href="../res/css/style.css">
    <script defer>
        document.addEventListener("DOMContentLoaded", function() {
            const loginLink = document.getElementById("loginLink");
            const registerLink = document.getElementById("registerLink");
            const profileLink = document.getElementById("profileLink");
            const logoutBtn = document.getElementById("logoutBtn");
            const myOrdersLink = document.getElementById("myOrdersLink");

            fetch("/Snackery/Backend/sessionStatus.php", {
                    credentials: "include"
                })
                .then(response => {
                    if (!response.ok) throw new Error("HTTP-Fehler");
                    return response.json();
                })
                .then(data => {
                    if (data.loggedIn) {
                        loginLink.style.display = "none";
                        registerLink.style.display = "none";
                        profileLink.style.display = "inline";
                        logoutBtn.style.display = "inline";
                        myOrdersLink.style.display = "inline";
                    } else {
                        loginLink.style.display = "inline";
                        registerLink.style.display = "inline";
                        profileLink.style.display = "none";
                        logoutBtn.style.display = "none";
                        myOrdersLink.style.display = "none";
                    }
                })
                .catch(error => {
                    console.error("❌ Fehler bei der Session-Überprüfung:", error);
                });

            logoutBtn.addEventListener("click", function(e) {
                e.preventDefault();
                fetch("/Snackery/Backend/logout.php", {
                        credentials: "include"
                    })
                    .then(res => res.json())
                    .then(data => {
                        if (data.success) {
                            window.location.href = "index.html";
                        } else {
                            alert("❌ Fehler beim Logout.");
                        }
                    })
                    .catch(() => {
                        alert("❌ Serverfehler beim Logout.");
                    });
            });
        });
    </script>
</head>

<body>

    <header>
        <div class="logo">
            <a href="index.html">
                <img src="../res/img/snackery-logo.jpg" alt="Snackery Logo">
            </a>
        </div>
        <nav>
            <ul>
                <li><a href="index.html">Startseite</a></li>
                <li><a href="products.html">Produkte</a></li>
                <li><a href="cart.html">Warenkorb</a></li>
                <li><a href="login.html" id="loginLink">Login</a></li>
                <li><a href="register.html" id="registerLink">Registrieren</a></li>
                <li><a href="profil.html" id="profileLink" style="display: none;">Mein Profil</a></li>
                <li><a href="my_orders.html" id="myOrdersLink" style="display: none;">Meine Bestellungen</a></li>
                <li><a href="#" id="logoutBtn" style="display: none;">Logout</a></li>
            </ul>
        </nav>
    </header>

    <section class="hero">
        <h1>Willkommen bei Snackery</h1>
        <p>Entdecke internationale Snacks aus aller Welt – direkt zu dir nach Hause geliefert!</p>
        <a href="products.html" class="btn">Jetzt entdecken</a>
    </section>

    <section class="features-section">
        <div class="feature-box">
            <img src="../res/icons/global.png" alt="Weltweiter Versand">
            <h3>Weltweit verfügbar</h3>
            <p>Snacks aus Japan, USA, Türkei und mehr.</p>
        </div>
        <div class="feature-box">
            <img src="../res/icons/fast.png" alt="Schneller Versand">
            <h3>Schneller Versand</h3>
            <p>In wenigen Tagen bei dir zuhause.</p>
        </div>
        <div class="feature-box">
            <img src="../res/icons/heart.png" alt="Mit Liebe verpackt">
            <h3>Mit Liebe verpackt</h3>
            <p>Dein Snack-Erlebnis zählt für uns.</p>
        </div>
    </section>

    <footer>
        <div class="footer-content">
            <p>&copy; 2025 Snackery</p>
            <div class="footer-links">
                <a href="impressum.html">Impressum</a>
                <a href="hilfe.html">Hilfe</a>
            </div>
        </div>
    </footer>

</body>

</html>