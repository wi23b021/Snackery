<!DOCTYPE html>
<!-- HTML5-Dokumenttypdeklaration -->
<html lang="de">
<!-- Die Sprache der Seite ist Deutsch -->

<head>
    <meta charset="UTF-8">
    <!-- Zeichencodierung UTF-8, damit Umlaute und Sonderzeichen korrekt dargestellt werden -->

    <title>Bestellung erfolgreich â€“ Snackery</title>
    <!-- Titel der Seite, der im Browser-Tab erscheint -->

    <!-- ======= CSS EINBINDEN ======= -->
    <link rel="stylesheet" href="../res/css/style.css">
    <!-- Zentrales Stylesheet fÃ¼r Farben, Layout, Schrift etc. -->

    <!-- ======= SESSION-PRÃœFUNG ======= -->
    <script src="../res/js/session-check.js" defer></script>
</head>

<body>

    <!-- ========== KOPFBEREICH MIT LOGO UND NAVIGATION ========== -->
    <header>
        <div class="logo">
            <a href="index.html">
                <img src="../res/img/snackery-logo.jpg" alt="Snackery Logo">
            </a>
        </div>

        <nav>
            <ul>
                <li><a href="index.html">Startseite</a></li>
                <li><a href="products.html">Produkte</a></li>
                <li><a href="cart.html">Warenkorb</a></li>
                <li><a href="profil.html">Mein Profil</a></li>
                <li><a href="my_orders.html" id="myOrdersLink" style="display: none;">Meine Bestellungen</a></li>
                <li><a href="#" id="logoutBtn">Logout</a></li>
            </ul>
        </nav>
    </header>

    <!-- ========== HAUPTINHALT: BESTELLBESTÃ„TIGUNG ========== -->
    <main class="register-container" style="text-align: center; margin-top: 50px;">
        <h1>âœ… Vielen Dank fÃ¼r deine Bestellung!</h1>
        <p>Wir haben deine Bestellung erhalten und bearbeiten sie schnellstmÃ¶glich.</p>

        <a class="btn" href="index.html" style="display: inline-block; margin-top: 30px;">
            ZurÃ¼ck zur Startseite
        </a>
        <br><br>
        <a class="btn" href="my_orders.html" id="myOrdersButton" style="display: none;">ðŸ§¾ Meine Bestellungen ansehen</a>
    </main>

    <!-- ========== FUSSZEILE ========== -->
    <footer style="text-align: center; margin-top: 50px;">
        <div class="footer-content">
            <p>&copy; 2025 Snackery</p>
            <div class="footer-links">
                <a href="impressum.html">Impressum</a>
                <a href="hilfe.html">Hilfe</a>
            </div>
        </div>
    </footer>

    <!-- ========== LOGOUT-SKRIPT ========== -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            const logoutBtn = document.getElementById("logoutBtn");
            const myOrdersLink = document.getElementById("myOrdersLink");
            const myOrdersButton = document.getElementById("myOrdersButton");

            // Logout
            if (logoutBtn) {
                logoutBtn.addEventListener("click", function(e) {
                    e.preventDefault();
                    fetch("/Snackery/Backend/logout.php", {
                            credentials: "include"
                        })
                        .then(res => res.json())
                        .then(data => {
                            if (data.success) {
                                window.location.href = "index.html";
                            } else {
                                alert("âŒ Logout fehlgeschlagen.");
                            }
                        })
                        .catch(() => {
                            alert("âŒ Serverfehler beim Logout.");
                        });
                });
            }

            // Sichtbarkeit von "Meine Bestellungen"
            fetch("/Snackery/Backend/sessionStatus.php", {
                    credentials: "include"
                })
                .then(res => res.json())
                .then(data => {
                    if (data.loggedIn) {
                        if (myOrdersLink) myOrdersLink.style.display = "inline";
                        if (myOrdersButton) myOrdersButton.style.display = "inline-block";
                    }
                });
        });
    </script>
</body>

</html>